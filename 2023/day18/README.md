# Day 18

[Exercise Text](https://adventofcode.com/2023/day/18)

## Part 1
```python
import re
from itertools import pairwise
from pathlib import Path

data_raw = Path(__file__).with_name("input.txt").read_text().splitlines()

edge = {(0, 0)}
minrow, maxrow, mincol, maxcol = 0, 0, 0, 0

row, col = (0, 0)
for line in data_raw:
    direction, str_count = re.match(r"([UDLR]) (\d+)", line).groups()
    count = int(str_count)
    for _ in range(count):
        if direction == "U":
            row -= 1
            minrow = min(minrow, row)
        elif direction == "D":
            row += 1
            maxrow = max(maxrow, row)
        elif direction == "L":
            col -= 1
            mincol = min(mincol, col)
        elif direction == "R":
            col += 1
            maxcol = max(maxcol, col)
        edge.add((row, col))

area = 0
inside = False
for row in range(minrow, maxrow + 1):
    down, up = False, False
    print(f"{row:<4}", end="")
    for col in range(mincol, maxcol + 1):
        if (row, col) in edge:
            if (row - 1, col) in edge:
                up = True
            if (row + 1, col) in edge:
                down = True
            if up and down:
                inside = not inside
            area += 1
            print("#", end="")
        else:
            up = down = False
            if inside:
                area += 1
                print("#", end="")
            else:
                print(".", end="")
    print()

print(area)

```
Runtime: 0.078s, Size: 1404, Output:
```
-129...........................................................................................................................##########..........................................................................................................................................................................................................................................................................
-128...........................................................................................................................##########..........................................................................................................................................................................................................................................................................
-127...........................................................................................................................#############.......................................................................................................................................................................................................................................................................
-126....................................................................................................................####################.......................................................................................................................................................................................................................................................................
-125....................................................................................................................####################.......................................................................................................................................................................................................................................................................
-124....................................................................................................................####################.......................................................................................................................................................................................................................................................................
-123...................................####......####...................................................................####################.................................................................######................................................................................................................................................................................................
-122...................................####......####...................................................................####################.................................................................######................................................................................................................................................................................................
-121...................................####......####...................................................................####################.................................................................######.......................................................................#####....................................................................................................................
-120...................................####......####...................................................................#############################........................................................######.......................................................................#####....................................................................................................................
-119...................................####......###############........................................................#############################........................................................######.......................................................................#####....................................................................................................................
-118...................................####......###############........................................................#############################........................................................##########...................................................................#################........................................................................................................
-117...................................####......###############....................................................#################################...............................................###################...................................................................#################........................................................................................................
-116........................###############......###############....................................................#################################...............................................###################...................................................................#################........................................................................................................
-115........................###############......###############....................................................#################################...............................................###################...................................................................#################........................................................................................................
-114........................###############......#####################..............................................#################################...............................................###################...................................................................#################........................................................................................................
-113........................###############......#####################..............................................#############################################...................................###################.....................................................#####.....#####################........................................................................................................
-112........................##########################################.....................................######################################################...................................##############################..........................................#####.....#############................................................................................................................
-111........................##########################################.....................................######################################################...................................##############################..........................................#####.....#############................................................................................................................
-110........................##########################################.....................................######################################################...................................####################################....................................#####.....#############................................................................................................................
-109........................##########################################.....................................############################################################.......................##########################################....................................#####.....#############................................................................................................................
-108.....####..........###############################################.....................................############################################################.......................##########################################....................................#######################................................................................................................................
-107.....####..........#####################################...............................................############################################################.......................##########################################.............................##############################.........................................########...............................................................
-106.....####..........#####################################...............................................############################################################.......................##########################################.............................##############################...............................####......########...............................................................
-105#########..........##############################......................................................############################################################.......................##########################################.............................##########################...................................####......########...............................................................
-104#########..........##############################......................................................############################################################.......................##########################################.............................##########################...................................####......########...............................................................
-103#########..........##############################......................................................###################################################################................####################################...................................##########################...................................####......########...............................................................
-102#########..........##############################......................................................###################################################################................####################################.......................................#######..#############...................................####......########...............................................................
-101#################################################.............................................................############################################################..................##################################.......................................#######..#######.........................................####......########...............................................................
-100#################################################.............................................................############################################################..................#############################............................................#######..#######.........................................####......########...............................................................
-99 #################################################.............................................................############################################################..................#############################............................................#######..#######.........................................####......########...............................................................
-98 ####################################################..........................................................############################################################..................#############################............................................#######..#######..................................###############..########...............................................................
-97 ####################################################..........................................................############################################################..................#############################.....................................................#######..................................###############..########...............................................................
-96 ############################################################..................................................############################################################........................#######################.....................................................##########...............................###############..########...............................................................
-95 ############################################################..................................................############################################################........................#############.....................................................####################...............................##############################..........................................................
-94 ############################################################..................................................############################################################........................#############.....................................................####################...............................##############################..........................................................
-93 ############################################################..................................................############################################################........................#####################..........................................#######################...............................##############################..........................................................
-92 ......######################################################.........................................................#####################################################...............................##############..........................................###########################.......####................##############################..........................................................
-91 ......######################################################.........................................................#######################################################.............................##############..........................................###########################.......####................##############################..........................................................
-90 ..............##############################################.........................................................#######################################################.............................##############..........................................###########################.......####................###################.....................................................................
-89 ..............##############################################.........................................................################################################################....................##############..........................................###########################.......####............#######################.....................................................................
-88 ..............###################################################....................................................################################################################....................##############..........................................###########################.......####............###############.............................................................................
-87 ..............#####################################...###########....................................................################################################################........................##########..........................................###########################.......####............###############.............................................................................
-86 ..............#####################################...###########....................................................################################################################........................##########..........................................################.............#########............####################........................................................................
-85 ..............#####################################...###########....................................................########################################..###########...................................##########..........................................################.............#########............####################........................................................................
-84 ..............#####################################...#####................................................................##################################..###########...................................##########....................................######################.............##############..#########################........................................................................
-83 ..............#####################################...#####................................................................##################################..###########...................................##########....................................#################################..##############..#########################........................................................................
-82 ..............#####################################...#####................................................................##################################..###########...................................##################..................###########################################..##############..###################################..............................................................
-81 ..............#####################################...#####................................................................##################################..###########...................................##################..................###########################################.......#########..###################################..............................................................
-80 ........................###########################...#####..........................................................########################################................................................##################..................###########################################.......#########..###################################..............................................................
-79 ........................###########################...#####..........................................................########################################................................................##########################..........###########################################################..###################################..............................................................
-78 ......................########################.......................................................................########################################........................................................##################..........###########################################################..#########################################........................................................
-77 ......................########################.......................................................................########################################........................................................##################..........###########################################################..#########################################........................................................
-76 ......................###########################......####..........................................................###############################################.................................................##################..........###########################################################..#########################################........................................................
-75 ......................###########################......####..........................................................###############################################.................................................##################..........###########################################################..#########################################........................................................
-74 ......................###########################......####...................................................##########################################################................................................###############..........######################################################################################################........................................................
-73 ......................###########################......####...................................................##########################################################................................................#######..................######################################################################################################........................................................
-72 .............####################################......####...................................................##########################################################................................................#######..................######################################################################################################........................................................
-71 .............####################################......####...................................................##########################################################................................................#######..........#######################################################################################################...............................................................
-70 .............####################################......####.............................................################################################################................................................#######..........#######################################################################################################...............................................................
-69 .............####################################......##########.......................................################################################################...........................................####################..#######################################################################################################...............................................................
-68 .............####################################......##########.......................................################################################################...........................................####################..##############################################################################################........................................................................
-67 .............####################################......##########.......................................################################################################...........................................####################..##############################################################################################........................................................................
-66 .................################################......##########...............................................########################################################...........................................####################..##############################################################################################........................................................................
-65 .................################################################...............................................########################################################...........................................####################..##############################################################################################........................................................................
-64 .................###################################################............................................########################################################........................................###############..........##############################################################################################........................................................................
-63 .................###################################################............................................#####################################################...........................................###############..........##############################################################################################........................................................................
-62 .................###################################################............................................#####################################################...........................................###############..........########################################################.........#############################........................................................................
-61 .....................###############################################............................................##############################.....##########...................................................#################################################################################.........########################################.............................................................
-60 .....................###############################################............................................##############################.....##########...................................................#################################################################################.........########################################.............................................................
-59 .....................###############################################............................................##############################.....##########...................................................#################################################################################.........########################################.............................................................
-58 .....................###############################################....................................##############################.............##########...................................................#################################################################################.........########################################.............................................................
-57 .....................###############################################....................................##############################.............##########...................................................#################################################################################.........########################################.............................................................
-56 .....................####################################################...............................##############################..........................................................................#################################################################################.........############################################.........................................................
-55 .....................####################################################...............................##############################..........................................................................#################################################################################.........############################################.........................................................
-54 .....................####################################################...............................##############################..........................................................................#################################################################################.........############################################.........................................................
-53 ............................#############################################.............................################################..............#######..............................................########################################################################################.................####################################.........................................................
-52 ............................#############################################.............................########################################......#######.......######.................................########################################################################################.................####################################.........................................................
-51 ............................#############################################.............................########################################......#######.......######.................................###############################################################################..........................####################################.........................................................
-50 ............................#############################################.............................########################################......#######.......######.................................###############################################################################..........................####################################.........................................................
-49 ................................#########################################...................##################################################......#######.......######.................................###############################################################################..........................####################################.........................................................
-48 ................................#########################################...................############################################################################........................................##################################################################................................####################################.........................................................
-47 ................................#########################################...................############################################################################........................................##################################################################................................####################################.........................................................
-46 ................................#################################################...........############################################################################........................................##################################################################................................####################################.........................................................
-45 ................................#################################################...........############################################################################........................................##################################################################................................####################################..............................#######....................
-44 .......................................##########################################...........############################################################################........................................##################################################################............................################################################..............#####...#######....................
-43 .......................................##########################################...........############################################################################........................................##################################################################............................################################################..............#####...#######....................
-42 ................................####...##########################################...........##########################################################################..........................................#######################################################.......................................################################################..............#####...#######....................
-41 ................................####...##########################################......###############################################################################......................................................###########################################.......................................################################################..............#####...#######....................
-40 ................................####...##########################################......######################################################################...............................................................###########################################.......................................#########################################.....................#####...#######....................
-39 ................................####.......######################################......######################################################################...............................................................###########################################.......................................#########################################.....................###################................
-38 ................................####.......######################################......######################################################################...............................................................###########################################.......................................#########################################.....................###################................
-37 ................................####.......######################################......######################################################################...............................................................##################################................................................#########################################............############################................
-36 .........................################..#############################################################################################################################....................................................##################################................................................#########################################............############################................
-35 .........................################..#############################################################################################################################....................................................##################################................................................#########################################............######################################......
-34 .........................################..#################################################################################################################################.......................................###########################################................................................#########################################............######################################......
-33 .........................################..#################################################################################################################################.......................................###########################################................................................#########################################............######################################......
-32 .........................###########...........#############################################################################################################################.......................................###########################################................................................################################################.....######################################......
-31 .........................###########...........#############################################################################################################################.......................................###########################################................................................################################################.....######################################......
-30 .........................###########...........##############################################################################################........#######################.......................................###########################################....................................................############################################.....######################################......
-29 .........................##################....##############################################################################################........#################################.............................###########################################....................................................############################################.....######################################......
-28 .........................##################....##############################################################################################........#################################..........................##############################################....................................................#######################################################################################......
-27 ...................########################....##############################################################################################........#################################..........................##############################################....................................................#######################################################################################......
-26 ...................########################....##############################################################################################........####################################.......................#######################################...........................................................#######################################################################################......
-25 ...................########################....##############################################################################################........####################################.......................#######################################...........................................................#######################################################################################......
-24 ...................########################....############################################################################################..........####################################.......................#######################################......................................................................##################################################################################
-23 .............##############################################################################################################################..........####################################................##############################################......................................................................##################################################################################
-22 .............###########......#############################################################################################################....................##########################................######################################..............................................................................##################################################################################
-21 .............###########......#############################################################################################################....................##########################................######################################..............................................................................##################################################################################
-20 .............###########......#############################################################################################################....................##########################................######################################..............................................................................##################################################################################
-19 .............###########......############################################################################################...###########............................#########.......................###########################################..............................................................................##################################################################################
-18 ..................######......############################################################################################...###########............................#########.......................###########################################..............................................................................#############################################################################.....
-17 ..................######......#######################################################################################........###########............................#########.......................###########################################.................####.............................................................#########################################################################.....
-16 .................................####################################################################################........###########............................#########.......................###########################################.................####.............................................................#################################..######################################.....
-15 .................................####################################################################################........###########............................#########.......................##################################...........#######.....#######.............................................................#################################..######################################.....
-14 .................................####################################################################################........###########............................#########.......................##################################...........#######.....#######.............................................................#################################..######################################.....
-13 .................................####################################################################################........###########............................#########................................#########################...........#######.....#######.............................................................#################################..###################################........
-12 .....................################################################################################################........................................................................................#########################...........#######.....#######.............................................................#################################..###################################........
-11 .....................################################################################################################........................................................................................#########################...........#######.....#######.............................................................#################################..###################################........
-10 .....................################################################################################################........................................................................................######################..............###################.............................................................#################################..###################################........
-9  .....................###################################################################################################............................................................................###############################..............###################........................................................######################################..###################################........
-8  .....................###################################################################################################............................................................................#####################################.....#########################.....................................................##########################..............###################################........
-7  .............###########################################################################################################............................................................................#####################################.....#########################.....................................................##########################..............###################################........
-6  .............###########################################################################################################.........................................................................########################################.....#########################.....................................................##########################..............###################################........
-5  .............###########################################################################################################.........................................................................########################################.....#########################.....................................................##############################................#############################........
-4  .............#############################################################################################################.......................................................................########################################.....#########################.....................................................##############################................#############################........
-3  .............#############################################################################################################.......................................................................###########################################################................................................................##############################................#######################..............
-2  .............#############################################################################################################.......................................................................###########################################################................................................................##############################..................#####################..............
-1  .............#############################################################################################################.......................................................................###########################################################................................................................##############################..................#####################..............
0   .............#############################################################################################################..............................................................####################################################################........................................................######################################..................#####################..............
1   ......................####################################################################################################..............................................................####################################################################........................................................##############################################..........##################################.
2   ......................####################################################################################################..............................................................####################################################################........................................................##############################################...............#############################.
3   ......................####################################################################################################..............................................................####################################################################........................................................##############################################...............#############################.
4   ......................###########################################################################################################.......................................................####################################################################........................................................##############################################...............#############################.
5   ......................###########################################################################################################.......................................................####################################################################........................................................##############################################...............#############################.
6   ......................###########################################################################################################............................................###############################################################################..................................................##############################################.............................#####################.
7   .........................########################################################################################################............................................######################################################################...........................................................##############################################.............................########..............
8   .........................########################################################################################################............................................######################################################################...........................................................##############################################.............................########..............
9   .........................########################################################################################################........................................##########################################################################.......................................................##################################################.............................########..............
10  .........................########################################################################################################........................................#####################################################################............................................................##################################################.............................########..............
11  .........................############################################################################################....................................................#####################################################################............................................................##################################################.............................########..............
12  .........................############################################################################################....................................................#####################################################################............................................................##################################################.............................########..............
13  .........................############################################################################################....................................................###########################################################......................................................................########################################.............................................................
14  .........................#################################################################################################...............................................###########################################################......................................................................########################################.............................................................
15  .........................#################################################################################################...............................................###########################################################..................................................................................############################.............................................................
16  .........................#################################################################################################......................................................####################################################..................................................................................############################.............................................................
17  ...................................#############################################################################################......####..............#####...................####################################################..................................................................................############################.............................................................
18  ...................................#############################################################################################......####..............#####...................####################################################..................................................................................############################.............................................................
19  ...................................#############################################################################################......####..............#####...................###############################################.................................................................................................#######........................................................................
20  .........................................#######################################################################################......####....#####.....##########..............###############################################.................................................................................................#######........................................................................
21  .........................................#######################################################################################......####....#####.....##########..............###############################################.................................................................................................#######........................................................................
22  .........................................#######################################################################################......####....#####.....##########..............###############################################.................................................................................................#######........................................................................
23  .........................................#######################################################################################......####....#####.....##########..............###############################################.................................................................................................#######........................................................................
24  .........................................#######################################################################################......############################..............########################################........................................................................................................#######........................................................................
25  .........................................#######################################################################################......############################..............########################################.......................................................................................................................................................................................
26  .........................................#########################################################################################################################...................###################################.......................................................................................................................................................................................
27  .........................................#########################################################################################################################...................###################################.......................................................................................................................................................................................
28  .........................................#########################################################################################################################...................###########################...............................................................................................................................................................................................
29  .........................................###############################################################################################################################.............###########################...............................................................................................................................................................................................
30  .........................................###############################################################################################################################.............###########################...............................................................................................................................................................................................
31  .........................................###############################################################################################################################.............###########################...............................................................................................................................................................................................
32  ..............................................##########################################################################################################################.............###########################...............................................................................................................................................................................................
33  ..............................................##############################################################################################################################....................################...............................................................................................................................................................................................
34  ..............................................##############################################################################################################################....................################...............................................................................................................................................................................................
35  ..............................................##############################################################################################################################....................############...................................................................................................................................................................................................
36  ..............................................##############################################################################################################################....................############...................................................................................................................................................................................................
37  ..............................................##############################################################################################################################....................############...................................................................................................................................................................................................
38  ....................................................########################################################################################################################....................############...................................................................................................................................................................................................
39  ....................................................########################################################################################################################....................############...................................................................................................................................................................................................
40  ....................................................####################################################################################################################............................########...................................................................................................................................................................................................
41  ....................................................####################################################################################################################............................########...................................................................................................................................................................................................
42  ....................................................########################################################################################################################........................############...............................................................................................................................................................................................
43  ....................................................########################################################################################################################........................############...............................................................................................................................................................................................
44  ...........................................................#####################################################################################################################....#####...........############...............................................................................................................................................................................................
45  ...........................................................#####################################################################################################################....#####...........############...............................................................................................................................................................................................
46  ..............................................###########..#####################################################################################################################....#####...........############...............................................................................................................................................................................................
47  ..............................................###########..#####################################################################################################################....############################...............................................................................................................................................................................................
48  ..............................................###########..#####################################################################################################################....############################...............................................................................................................................................................................................
49  ..............................................###########..#####################################################################################################################....############################...............................................................................................................................................................................................
50  ..............................................###########..#####################################################################################################################....############################...............................................................................................................................................................................................
51  ..............................................###########..#####################################################################################################################################################...............................................................................................................................................................................................
52  ..............................................###########..#####################################################################################################################################################...............................................................................................................................................................................................
53  ..............................................###########........###############################################################################################################################################...............................................................................................................................................................................................
54  ..............................................###########........###############################################################################################################################################...............................................................................................................................................................................................
55  ....................................############################################################################################################################################################################...............................................................................................................................................................................................
56  ....................................#####################################################################################################################################################################......................................................................................................................................................................................................
57  ....................................#####################################################################################################################################################################......................................................................................................................................................................................................
58  ....................................#####################################################################################################################################################################......................................................................................................................................................................................................
59  ..................................####################################################################################################################################################################.........................................................................................................................................................................................................
60  ..................................####################################################################################################################################################################.........................................................................................................................................................................................................
61  ..................................####################################################################################################################################################################.........................................................................................................................................................................................................
62  ..................................##############################################################################################################################################################...............................................................................................................................................................................................................
63  ..................................##############################################################################################################################################################...............................................................................................................................................................................................................
64  ..................................##############################################################################################################################################################...............................................................................................................................................................................................................
65  ..................................##############################################################################################################################################################...............................................................................................................................................................................................................
66  .......................................##############....#####################################################################################################################################.................................................................................................................................................................................................................
67  .......................................##############....#####################################################################################################################################.................................................................................................................................................................................................................
68  .......................................##############....#####################################################################################################################################.................................................................................................................................................................................................................
69  .......................................##############............#############################################################################################################################.................................................................................................................................................................................................................
70  .......................................##############............#############################################################################################################################.................................................................................................................................................................................................................
71  .......................................##############............##################################################################################################################............................................................................................................................................................................................................................
72  .......................................##############............##################################################################################################################............................................................................................................................................................................................................................
73  .................................................................##################################################################################################################............................................................................................................................................................................................................................
74  .................................................................##################################################################################################################............................................................................................................................................................................................................................
75  .................................................................##################################################################################################################............................................................................................................................................................................................................................
76  .................................................................#############################################################################################################.................................................................................................................................................................................................................................
77  .................................................................#############################################################################################################.................................................................................................................................................................................................................................
78  .........................................................................##################################################################################################....................................................................................................................................................................................................................................
79  .........................................................................##################################################################################################....................................................................................................................................................................................................................................
80  .........................................................................##################################################################################################....................................................................................................................................................................................................................................
81  .........................................................................##################################################################################################....................................................................................................................................................................................................................................
82  .........................................................................##################################################################################################....................................................................................................................................................................................................................................
83  .............................................................................#########################################################################################.........................................................................................................................................................................................................................................
84  .............................................................................#########################################################################################.........................................................................................................................................................................................................................................
85  .............................................................................##############################################################################....................................................................................................................................................................................................................................................
86  .............................................................................##############################################################################....................................................................................................................................................................................................................................................
87  .............................................................................##############################################################################....................................................................................................................................................................................................................................................
88  .............................................................................##############################################################################....................................................................................................................................................................................................................................................
89  .............................................................................##############################################################################....................................................................................................................................................................................................................................................
90  .............................................................................######################################################################............................................................................................................................................................................................................................................................
91  ...................................................................................################################################################............................................................................................................................................................................................................................................................
92  ...................................................................................################################################################............................................................................................................................................................................................................................................................
93  ...................................................................................################################################################............................................................................................................................................................................................................................................................
94  ...................................................................................################################################################............................................................................................................................................................................................................................................................
95  ...................................................................................################################################################............................................................................................................................................................................................................................................................
96  ...................................................................................################################################################............................................................................................................................................................................................................................................................
97  ...................................................................................################################################################............................................................................................................................................................................................................................................................
98  ...................................................................................################################################################............................................................................................................................................................................................................................................................
99  .............................................................................######################################################################............................................................................................................................................................................................................................................................
100 .............................................................................#############################################################.....................................................................................................................................................................................................................................................................
101 .............................................................................#############################################################.....................................................................................................................................................................................................................................................................
102 .............................................................................#############################################################.....................................................................................................................................................................................................................................................................
103 .............................................................................#############################################################.....................................................................................................................................................................................................................................................................
104 .............................................................................#############################################################.....................................................................................................................................................................................................................................................................
105 ..................................................................................########################################################.....................................................................................................................................................................................................................................................................
106 ..................................................................................########################################################.....................................................................................................................................................................................................................................................................
107 ..................................................................................########################################################.....................................................................................................................................................................................................................................................................
108 ..................................................................................#################################################............................................................................................................................................................................................................................................................................
109 ..................................................................................#################################################............................................................................................................................................................................................................................................................................
110 .........................................................................................##########################################............................................................................................................................................................................................................................................................................
111 .........................................................................................##########################################............................................................................................................................................................................................................................................................................
112 .........................................................................................##########################################............................................................................................................................................................................................................................................................................
113 .........................................................................................##########################################............................................................................................................................................................................................................................................................................
114 .........................................................................................##########################################............................................................................................................................................................................................................................................................................
115 .........................................................................................##########################################............................................................................................................................................................................................................................................................................
116 ...............................................................................................####################################............................................................................................................................................................................................................................................................................
117 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
118 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
119 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
120 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
121 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
122 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
123 ...............................................................................................##############################..................................................................................................................................................................................................................................................................................
124 .........................................................................................................####################..................................................................................................................................................................................................................................................................................
125 .........................................................................................................####################..................................................................................................................................................................................................................................................................................
126 .........................................................................................................####################..................................................................................................................................................................................................................................................................................
127 .........................................................................................................##############........................................................................................................................................................................................................................................................................................
128 .........................................................................................................##############........................................................................................................................................................................................................................................................................................
129 .........................................................................................................##############........................................................................................................................................................................................................................................................................................
130 .........................................................................................................##############........................................................................................................................................................................................................................................................................................
131 .............................................................................................................##########........................................................................................................................................................................................................................................................................................
132 .............................................................................................................##########........................................................................................................................................................................................................................................................................................
133 .............................................................................................................##########........................................................................................................................................................................................................................................................................................
134 .............................................................................................................##########........................................................................................................................................................................................................................................................................................
135 .............................................................................................................######################............................................................................................................................................................................................................................................................................
136 ...................................................................................................................################............................................................................................................................................................................................................................................................................
137 ...................................................................................................................################............................................................................................................................................................................................................................................................................
138 ...................................................................................................................################............................................................................................................................................................................................................................................................................
139 .......................................................................................................................##################......................................................................................................................................................................................................................................................................
140 .......................................................................................................................##################......................................................................................................................................................................................................................................................................
141 .......................................................................................................................##################......................................................................................................................................................................................................................................................................
142 .......................................................................................................................############################............................................................................................................................................................................................................................................................
143 .......................................................................................................................############################............................................................................................................................................................................................................................................................
144 .......................................................................................................................############################............................................................................................................................................................................................................................................................
145 ............................................................................................................................#######################............................................................................................................................................................................................................................................................
146 ............................................................................................................................#######################............................................................................................................................................................................................................................................................
147 ............................................................................................................................#######################............................................................................................................................................................................................................................................................
148 ............................................................................................................................####################...............................................................................................................................................................................................................................................................
149 ............................................................................................................................####################...............................................................................................................................................................................................................................................................
150 ...................................................................................................................................#############...............................................................................................................................................................................................................................................................
151 ...................................................................................................................................#############...............................................................................................................................................................................................................................................................
152 ...................................................................................................................................#############...............................................................................................................................................................................................................................................................
153 ...................................................................................................................................#############...............................................................................................................................................................................................................................................................
154 ......................................................................................................................................##########...............................................................................................................................................................................................................................................................
155 ......................................................................................................................................##########...............................................................................................................................................................................................................................................................
40745
```
## Part 2
```python
import re
from collections import defaultdict
from itertools import batched, combinations
from pathlib import Path

from rich import print

data_raw = Path(__file__).with_name("input.txt").read_text().splitlines()

vertices_per_row = defaultdict(list)

row, col = (0, 0)
for line in data_raw:
    hex_count, dir_str = re.search(r"#([0-9a-f]{5})([0-9a-f])", line).groups()
    direction = "RDLU"[int(dir_str)]
    count = int(hex_count, 16)
    if direction == "U":
        row -= count
    elif direction == "D":
        row += count
    elif direction == "L":
        col -= count
    elif direction == "R":
        col += count
    vertices_per_row[row].append(col)

vertices_per_row = {row: sorted(cols) for row, cols in vertices_per_row.items()}

area = 0
type Range = tuple[int, int]
current_ranges: list[Range] = []
prev_row = 0
for row in sorted(vertices_per_row.keys()):
    cols = vertices_per_row[row]
    row_ranges = [(a, b) for a, b in batched(cols, 2)]

    # add rectangle area between vertex rows
    width = sum(b - a + 1 for (a, b) in current_ranges)
    height = row - prev_row - 1
    prev_row = row
    area += width * height

    # add vertex row
    vertex_row = list(current_ranges) + list(row_ranges)
    while True:
        N = len(vertex_row)
        for i, j in combinations(range(N), 2):
            (a1, a2) = vertex_row[i]
            (b1, b2) = vertex_row[j]
            if not (a2 < b1 or b2 < a1):
                # they intersect
                merged = (min(a1, b1), max(a2, b2))
                vertex_row.pop(j)
                vertex_row.pop(i)
                vertex_row.append(merged)
                break
        else:
            break
    area += sum(b - a + 1 for (a, b) in vertex_row)

    # compute new range
    while row_ranges:
        (r1, r2) = row_ranges.pop()
        inside = []
        extends = []
        for c1, c2 in current_ranges:
            if c1 <= r1 <= r2 <= c2:
                inside.append((c1, c2))
            if r2 == c1 or c2 == r1:
                extends.append((c1, c2))
        assert len(inside) <= 1
        assert len(extends) <= 2
        assert not (inside and extends)
        if inside:
            c1, c2 = inside[0]
            current_ranges.remove((c1, c2))
            if c1 == r1 and c2 == r2:
                pass
            elif c1 == r1:
                current_ranges.append((r2, c2))
            elif c2 == r2:
                current_ranges.append((c1, r1))
            else:
                current_ranges.extend(((c1, r1), (r2, c2)))
        elif extends:
            for c1, c2 in extends:
                current_ranges.remove((c1, c2))
                r1 = min(r1, c1)
                r2 = max(r2, c2)
            current_ranges.append((r1, r2))
        else:
            current_ranges.append((r1, r2))
        assert not any(a == b for a, b in current_ranges)

print(area)

```
Runtime: 0.065s, Size: 2880, Output:
```
90111113594927
```